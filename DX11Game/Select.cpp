//************************************************************************************
// 
// セレクト画面[Select.cpp]
// 編集者：伊地田真衣
// 
//************************************************************************************
//-------------------- インクルード部 --------------------
#include "Select.h"
#include "input.h"

#include "fade.h"
#include "Sound.h"

#include "bg.h"
#include "SelectUI.h"

//====================================================================================
//
//				コンストラクタ
//
//====================================================================================
Select::Select() {

}

//====================================================================================
//
//				デストラクタ
//
//====================================================================================
Select::~Select() {

}

//====================================================================================
//
//				初期化
//
//====================================================================================
void Select::Init() {
	// UI表示のシーン初期化
	pUI = std::make_unique<SelectUI>();
	pUI->Init();

	// BGM再生
	CSound::Play(BGM_MODE);
}

//====================================================================================
//
//				終了
//
//====================================================================================
void Select::Uninit() {
	// BGM再生停止
	CSound::Stop(BGM_MODE);

	// UI表示のシーン終了
	pUI->Uninit();
	pUI.reset();
}

//====================================================================================
//
//				更新
//
//====================================================================================
void Select::Update() {
	int _select = pUI->Update();
	
	// 決定キーが押されたらシーン遷移
	if (GetMouseRelease(MOUSEBUTTON_L) || GetKeyRelease(VK_SPACE)) {
		// SE再生
		CSound::Play(SE_DECIDE);

		if (_select == SelectUI::START) {
			Fade::StartFadeOut(SCENE_STAGESUMMARY);
		} else if (_select == SelectUI::TUTORIAL) {
			Fade::StartFadeOut(SCENE_TUTORIAL);
		}
	}
}


//====================================================================================
//
//				描画
//
//====================================================================================
void Select::Draw() {
	BG::Draw(SCENE_MODESELECT);

	pUI->Draw();
}